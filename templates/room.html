{% extends 'base.html' %}
{% block content %}
<h1>#{{ code }} â€” Kategori & ÃœrÃ¼nler</h1>
<div class="grid cats">
  <div class="chip float">ğŸ– Et & Mangal</div>
  <div class="chip float">ğŸ¥— Salatalar</div>
  <div class="chip float">ğŸ¥ HamuriÅŸi</div>
  <div class="chip float">ğŸ° TatlÄ±</div>
  <div class="chip float">ğŸ¥¤ Ä°Ã§ecek</div>
  <div class="chip float">ğŸ§‚ DiÄŸer</div>
</div>
<section class="card">
  <h3>ÃœrÃ¼n Ekle</h3>
  <div class="row">
    <input id="name" placeholder="ÃœrÃ¼n adÄ±">
    <input id="amount" type="number" min="1" value="1" style="max-width:100px;">
    <button onclick="addItem()">Ekle</button>
  </div>
</section>
<section class="card">
  <h3>Liste</h3>
  <ul id="list"></ul>
</section>
<script>
async function load() {
  const r = await fetch("/api/room/{{ code }}"); const d = await r.json();
  const ul = document.getElementById("list"); ul.innerHTML = "";
  d.items.forEach(it => { const li = document.createElement("li"); li.textContent = `${it.amount} ${it.unit||""} ${it.name} â€” ${it.cat||""}`; ul.appendChild(li); });
}
async function addItem() {
  const name = document.getElementById("name").value.trim() || "ÃœrÃ¼n";
  const amount = document.getElementById("amount").value || "1";
  await fetch("/api/room/{{ code }}/add", {method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify({name, amount})});
  load();
}
load();
</script>
{% endblock %}
